const i=new Proxy({dark:!1,appearance:"system",storage:"ObsidianUI.appearance",init(){this.dark=this.checkAppearanceClass(),this.appearance=this.getAppearanceStorage()},checkAppearanceClass(){return document.documentElement.classList.contains("dark")},getAppearance(){return this.appearance},getAppearanceMode(){return this.dark?"dark":"light"},getAppearanceStorage(){return window.localStorage.getItem(this.storage)||"system"},setAppearance(e){let t=this.appearance!=e;this.appearance=e,e==="dark"&&this.setDark(!0),e==="light"&&this.setDark(!1),e==="system"&&this.setAppearanceSystem(),t&&this.setGenerateEvent()},setAppearanceSystem(){window.matchMedia("(prefers-color-scheme: dark)").matches?this.setDark(!0):this.setDark(!1),window.localStorage.removeItem(this.storage)},setDark(e){let t=this.dark!=e;this.dark=e,document.documentElement.classList.toggle("dark",e),window.localStorage.setItem(this.storage,this.getAppearanceMode()),t&&this.setGenerateEvent()},setGenerateEvent(){window.dispatchEvent(new CustomEvent("obsidianui:appearance",{detail:{theme:this.getAppearanceMode(),appearance:this.getAppearance()}}))}},{get(e,t){return typeof e[t]=="function"?e[t].bind(e):e[t]},set(e,t,a){return t==="dark"&&e.setDark(a),t==="appearance"&&e.setAppearance(a),!0}});window.ObsidianUI=i;window.ObsidianUI.init();document.addEventListener("livewire:navigated",()=>{var e;(e=window.ObsidianUIAppearance)!=null&&e.initAppearance&&window.ObsidianUIAppearance.initAppearance()});window.addEventListener("obsidianui:appearance",function(e){const{theme:t,appearance:a}=e.detail});window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{var t;(t=window.ObsidianUIAppearance)!=null&&t.initAppearance&&window.ObsidianUI.getAppearanceStorage()=="system"&&window.ObsidianUI.setAppearance("system"),window.ObsidianUI.init()});Alpine.magic("obsidianui",()=>window.ObsidianUI);Alpine.data("obsidianui_header",()=>({init(){this.update(),this.observe()},observe(){new ResizeObserver(this.update.bind(this)).observe(this.$root)},update(){document.documentElement.style.setProperty("--obsidian-utility-header-height",this.$root.offsetHeight+"px"),document.documentElement.style.setProperty("--obsidian-utility-header-width",this.$root.offsetWidth+"px")}}));Alpine.data("obsidianui_code",()=>({copied:!1,getCode(){return this.$refs.code},getCodeText(){return this.getCode().innerText},copy(){navigator.clipboard.writeText(this.getCodeText()).then(()=>{this.copied=!0,setTimeout(()=>this.copied=!1,1e3)}).catch(()=>console.log("Copy failed"))}}));
